<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Book a Class - Olympus Strength</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Calendar Styles */
        .booking-container {
            padding: 3rem 0;
            background-color: var(--gray-100);
        }
        
        .booking-header {
            margin-bottom: 2rem;
        }
        
        .booking-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        @media (min-width: 992px) {
            .booking-grid {
                grid-template-columns: 2fr 1fr;
            }
        }
        
        .calendar-container {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .month-selector {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .month-selector h3 {
            margin: 0;
            font-size: 1.5rem;
        }
        
        .nav-btn {
            background-color: var(--gray-200);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }
        
        .nav-btn:hover {
            background-color: var(--primary-light);
            color: var(--primary);
        }
        
        /* Calendar Grid */
        .calendar {
            width: 100%;
            border-collapse: collapse;
        }
        
        .calendar th {
            padding: 0.75rem;
            text-align: center;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        
        .calendar td {
            padding: 0;
            text-align: center;
            position: relative;
            height: 80px;
            border: 1px solid var(--gray-200);
        }
        
        .calendar-day {
            position: relative;
            height: 100%;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .calendar-day:hover {
            background-color: var(--gray-100);
        }
        
        .day-number {
            position: absolute;
            top: 8px;
            left: 8px;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .has-events {
            position: relative;
        }
        
        .has-events:after {
            content: "";
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: var(--primary);
        }
        
        .other-month {
            color: var(--gray-400);
            background-color: var(--gray-100);
        }
        
        .today {
            background-color: var(--primary-light);
        }
        
        .selected {
            background-color: var(--primary-light);
            border: 2px solid var(--primary);
        }
        
        /* Available Times */
        .booking-details {
            background-color: var(--white);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.5rem;
        }
        
        .available-times h3 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            font-size: 1.3rem;
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }
        
        .time-slot {
            padding: 0.75rem;
            text-align: center;
            border: 1px solid var(--gray-300);
            border-radius: 4px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .time-slot:hover {
            background-color: var(--primary-light);
            border-color: var(--primary);
        }
        
        .time-slot.selected {
            background-color: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }
        
        .time-slot.booked {
            background-color: var(--gray-200);
            color: var(--gray-400);
            cursor: not-allowed;
            border-color: var(--gray-300);
        }
        
        .time-slot.booked:hover {
            background-color: var(--gray-200);
            border-color: var(--gray-300);
        }
        
        .selected-class-info {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--gray-200);
        }
        
        .selected-class-info h3 {
            margin-top: 0;
            margin-bottom: 1rem;
        }
        
        .class-detail {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }
        
        .class-detail i {
            color: var(--primary);
            width: 20px;
        }
        
        .booking-actions {
            margin-top: 2rem;
        }
        
        .legend {
            display: flex;
            gap: 1.5rem;
            margin-top: 1rem;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9rem;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
        }
        
        .legend-available {
            background-color: var(--white);
            border: 1px solid var(--gray-300);
        }
        
        .legend-selected {
            background-color: var(--primary);
        }
        
        .legend-booked {
            background-color: var(--gray-200);
        }
        
        .legend-today {
            background-color: var(--primary-light);
        }
        
        /* Empty state */
        .no-times-available {
            text-align: center;
            padding: 2rem;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <a href="/" class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4CAF50" width="24" height="24">
                    <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
                </svg>
                OLYMPUS STRENGTH
            </a>
            
            <button class="mobile-toggle">☰</button>
            
            <nav class="nav">
                <a href="/" class="nav-link">Home</a>
                <a href="/members" class="nav-link">Members</a>
                <a href="/workouts" class="nav-link">Workouts</a>
                <a href="/login" class="nav-link">Login</a>
                <a href="/members" class="btn btn-sm">Join Now</a>
            </nav>
        </div>
    </header>

    <section class="page-header">
        <div class="container">
            <h1 class="page-title">Book a Class</h1>
            <p class="page-subtitle">Schedule your next training session</p>
        </div>
    </section>

    <section class="booking-container">
        <div class="container">
            <div class="booking-header">
                <h2 id="current-class-title">Olympic Weightlifting</h2>
                <p>Instructor: <strong id="current-instructor">Alex Hermes</strong></p>
            </div>
            
            <div class="booking-grid">
                <div class="calendar-container">
                    <div class="calendar-header">
                        <div class="month-selector">
                            <button class="nav-btn" id="prev-month">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <h3 id="current-month">March 2025</h3>
                            <button class="nav-btn" id="next-month">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    
                    <table class="calendar" id="booking-calendar">
                        <thead>
                            <tr>
                                <th>Sun</th>
                                <th>Mon</th>
                                <th>Tue</th>
                                <th>Wed</th>
                                <th>Thu</th>
                                <th>Fri</th>
                                <th>Sat</th>
                            </tr>
                        </thead>
                        <tbody id="calendar-body">
                            <!-- Calendar days will be generated by JS -->
                        </tbody>
                    </table>
                    
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color legend-available"></div>
                            <span>Available</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-selected"></div>
                            <span>Selected</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-today"></div>
                            <span>Today</span>
                        </div>
                    </div>
                </div>
                
                <div class="booking-details">
                    <div class="available-times">
                        <h3>Available Times for <span id="selected-date">March 5, 2025</span></h3>
                        
                        <div class="time-slots" id="time-slots-container">
                            <!-- Time slots will be generated by JS -->
                        </div>
                    </div>
                    
                    <div class="selected-class-info" id="selected-class-info" style="display: none;">
                        <h3>Class Details</h3>
                        <div class="class-detail">
                            <i class="fas fa-dumbbell"></i>
                            <span>Olympic Weightlifting</span>
                        </div>
                        <div class="class-detail">
                            <i class="fas fa-user"></i>
                            <span>Instructor: Alex Hermes</span>
                        </div>
                        <div class="class-detail" id="selected-date-time">
                            <i class="fas fa-calendar-alt"></i>
                            <span>March 5, 2025 at 10:00 AM</span>
                        </div>
                        <div class="class-detail">
                            <i class="fas fa-clock"></i>
                            <span>Duration: 60 minutes</span>
                        </div>
                        <div class="class-detail">
                            <i class="fas fa-users"></i>
                            <span>5 spots remaining</span>
                        </div>
                        
                        <div class="booking-actions">
                            <button class="btn" id="confirm-booking">Confirm Booking</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-about">
                    <a href="/" class="footer-logo">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#4CAF50" width="24" height="24">
                            <path d="M20.57 14.86L22 13.43 20.57 12 17 15.57 8.43 7 12 3.43 10.57 2 9.14 3.43 7.71 2 5.57 4.14 4.14 2.71 2.71 4.14l1.43 1.43L2 7.71l1.43 1.43L2 10.57 3.43 12 7 8.43 15.57 17 12 20.57 13.43 22l1.43-1.43L16.29 22l2.14-2.14 1.43 1.43 1.43-1.43-1.43-1.43L22 16.29z"/>
                        </svg>
                        OLYMPUS STRENGTH
                    </a>
                    <p>Forge your legacy at Olympus Strength. We provide the tools, knowledge, and community you need to reach your fitness goals.</p>
                </div>
                
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/members">Members</a></li>
                        <li><a href="/workouts">Workouts</a></li>
                        <li><a href="/login">Login</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Programs</h4>
                    <ul>
                        <li><a href="#">Olympic Weightlifting</a></li>
                        <li><a href="#">Spartan HIIT</a></li>
                        <li><a href="#">Strength Foundations</a></li>
                        <li><a href="#">All Programs</a></li>
                    </ul>
                </div>
                
                <div class="footer-links">
                    <h4>Contact Us</h4>
                    <ul>
                        <li>📞 (555) 123-4567</li>
                        <li>📧 info@olympusstrength.com</li>
                        <li>📍 123 Fitness Ave, Olympia</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 Olympus Strength. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get URL parameters to determine which class was selected
            const urlParams = new URLSearchParams(window.location.search);
            const classId = urlParams.get('class_id');
            const className = urlParams.get('class_name') || 'Olympic Weightlifting';
            const instructor = urlParams.get('instructor') || 'Alex Hermes';
            
            // Update the page with class information
            document.getElementById('current-class-title').textContent = className;
            document.getElementById('current-instructor').textContent = instructor;
            
            // Calendar functionality
            const calendarBody = document.getElementById('calendar-body');
            const currentMonthElement = document.getElementById('current-month');
            const prevMonthButton = document.getElementById('prev-month');
            const nextMonthButton = document.getElementById('next-month');
            const timeSlotsContainer = document.getElementById('time-slots-container');
            const selectedDateElement = document.getElementById('selected-date');
            const selectedClassInfo = document.getElementById('selected-class-info');
            const selectedDateTime = document.getElementById('selected-date-time');
            const confirmBookingButton = document.getElementById('confirm-booking');
            
            let currentDate = new Date();
            let currentMonth = currentDate.getMonth();
            let currentYear = currentDate.getFullYear();
            let selectedDay = null;
            let selectedTimeSlot = null;
            
            // Initialize calendar
            generateCalendar(currentMonth, currentYear);
            updateMonthDisplay();
            
            // Event listeners for month navigation
            prevMonthButton.addEventListener('click', function() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                generateCalendar(currentMonth, currentYear);
                updateMonthDisplay();
            });
            
            nextMonthButton.addEventListener('click', function() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                generateCalendar(currentMonth, currentYear);
                updateMonthDisplay();
            });
            
            // Confirm booking button
            confirmBookingButton.addEventListener('click', function() {
                if (selectedDay && selectedTimeSlot) {
                    alert(`Your booking for ${className} on ${formatDate(selectedDay)} at ${selectedTimeSlot} has been confirmed!`);
                    // Here you would typically send this data to your backend
                }
            });
            
            // Generate the calendar for a given month and year
            function generateCalendar(month, year) {
                calendarBody.innerHTML = '';
                
                // Get the first day of the month
                const firstDay = new Date(year, month, 1).getDay();
                
                // Get the number of days in the month
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                
                // Get the number of days in the previous month
                const daysInPrevMonth = new Date(year, month, 0).getDate();
                
                let date = 1;
                let nextMonthDate = 1;
                
                // Create calendar rows
                for (let i = 0; i < 6; i++) {
                    const row = document.createElement('tr');
                    
                    // Create calendar cells
                    for (let j = 0; j < 7; j++) {
                        const cell = document.createElement('td');
                        
                        if (i === 0 && j < firstDay) {
                            // Previous month's days
                            const prevMonthDay = daysInPrevMonth - (firstDay - j - 1);
                            const dayElement = createDayElement(prevMonthDay, true);
                            cell.appendChild(dayElement);
                        } else if (date > daysInMonth) {
                            // Next month's days
                            const dayElement = createDayElement(nextMonthDate, true);
                            cell.appendChild(dayElement);
                            nextMonthDate++;
                        } else {
                            // Current month's days
                            const isToday = date === new Date().getDate() && 
                                           month === new Date().getMonth() && 
                                           year === new Date().getFullYear();
                            
                            // Add classes for specific dates (M, W, F for Olympic Weightlifting)
                            const dayOfWeek = new Date(year, month, date).getDay();
                            const hasEvents = (dayOfWeek === 1 || dayOfWeek === 3 || dayOfWeek === 5);
                            
                            const dayElement = createDayElement(date, false, isToday, hasEvents);
                            cell.appendChild(dayElement);
                            
                            // Add click event to show available times
                            dayElement.addEventListener('click', function() {
                                // Clear previous selection
                                const allDays = document.querySelectorAll('.calendar-day');
                                allDays.forEach(day => day.classList.remove('selected'));
                                
                                // Mark as selected
                                this.classList.add('selected');
                                
                                // Update selected date
                                selectedDay = new Date(year, month, date);
                                selectedDateElement.textContent = formatDate(selectedDay);
                                
                                // Generate time slots based on day of week
                                generateTimeSlots(dayOfWeek);
                                
                                // Hide class info until time is selected
                                selectedClassInfo.style.display = 'none';
                            });
                            
                            date++;
                        }
                        
                        row.appendChild(cell);
                    }
                    
                    calendarBody.appendChild(row);
                    
                    // Stop creating rows if we've gone past the end of the month
                    if (date > daysInMonth) {
                        break;
                    }
                }
            }
            
            // Create a single day element for the calendar
            function createDayElement(dayNumber, isOtherMonth, isToday = false, hasEvents = false) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                
                if (isOtherMonth) {
                    dayElement.classList.add('other-month');
                }
                
                if (isToday) {
                    dayElement.classList.add('today');
                }
                
                if (hasEvents) {
                    dayElement.classList.add('has-events');
                }
                
                const dayNumberElement = document.createElement('span');
                dayNumberElement.className = 'day-number';
                dayNumberElement.textContent = dayNumber;
                
                dayElement.appendChild(dayNumberElement);
                
                return dayElement;
            }
            
            // Generate time slots based on day of week
            function generateTimeSlots(dayOfWeek) {
                timeSlotsContainer.innerHTML = '';
                
                // For this example, Olympic Weightlifting is on Monday, Wednesday, Friday
                if (dayOfWeek === 1 || dayOfWeek === 3 || dayOfWeek === 5) {
                    const times = ['6:00 AM', '8:00 AM', '10:00 AM', '5:00 PM', '7:00 PM'];
                    
                    // Randomly mark some as booked
                    const bookedIndexes = [];
                    for (let i = 0; i < 2; i++) {
                        let randomIndex;
                        do {
                            randomIndex = Math.floor(Math.random() * times.length);
                        } while (bookedIndexes.includes(randomIndex));
                        bookedIndexes.push(randomIndex);
                    }
                    
                    times.forEach((time, index) => {
                        const timeSlot = document.createElement('div');
                        timeSlot.className = 'time-slot';
                        timeSlot.textContent = time;
                        
                        if (bookedIndexes.includes(index)) {
                            timeSlot.classList.add('booked');
                            timeSlot.title = 'This time slot is fully booked';
                        } else {
                            timeSlot.addEventListener('click', function() {
                                // Clear previous selection
                                const allTimeSlots = document.querySelectorAll('.time-slot');
                                allTimeSlots.forEach(slot => slot.classList.remove('selected'));
                                
                                // Mark as selected
                                this.classList.add('selected');
                                selectedTimeSlot = time;
                                
                                // Show class info
                                selectedClassInfo.style.display = 'block';
                                selectedDateTime.innerHTML = `<i class="fas fa-calendar-alt"></i><span>${formatDate(selectedDay)} at ${time}</span>`;
                            });
                        }
                        
                        timeSlotsContainer.appendChild(timeSlot);
                    });
                } else {
                    // No classes on this day
                    const noTimesElement = document.createElement('div');
                    noTimesElement.className = 'no-times-available';
                    noTimesElement.innerHTML = '<i class="fas fa-calendar-times"></i><p>No classes scheduled for this day.</p>';
                    timeSlotsContainer.appendChild(noTimesElement);
                }
            }
            
            // Update the displayed month and year
            function updateMonthDisplay() {
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                currentMonthElement.textContent = `${monthNames[currentMonth]} ${currentYear}`;
            }
            
            // Format date for display
            function formatDate(date) {
                const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
                return `${monthNames[date.getMonth()]} ${date.getDate()}, ${date.getFullYear()}`;
            }
            
            // Mobile menu toggle
            const mobileToggle = document.querySelector('.mobile-toggle');
            const nav = document.querySelector('.nav');
            
            if (mobileToggle) {
                mobileToggle.addEventListener('click', function() {
                    nav.classList.toggle('active');
                });
            }
        });
    </script>
</body>
</html>